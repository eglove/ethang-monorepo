@startuml Todo Feature Architecture
title Todo Feature Architecture

package "Todo Feature" {
    component [TodoPage] <<React Component>>
    component [TodoTemplate] <<React Component>>
    component [AddTodoForm] <<React Component>>
    component [TodoList] <<React Component>>
    component [TodoItem] <<React Component>>
    database "TodoStore" <<BaseStore>>
}

[TodoPage] ..> [TodoStore] : uses (useStore)
[TodoPage] --> [TodoTemplate] : uses
[TodoTemplate] --> [AddTodoForm] : renders
[TodoTemplate] --> [TodoList] : renders
[TodoList] --> [TodoItem] : renders multiple
[AddTodoForm] ..> [TodoStore] : dispatches (addTodo)
[TodoItem] ..> [TodoStore] : uses/dispatches (useStore, toggleTodo, updateTodo, deleteTodo)

@enduml

@startuml Add Todo Sequence
title Add Todo Sequence

actor User
participant AddTodoForm
participant TodoStore

User -> AddTodoForm : Enters title and clicks Add
AddTodoForm -> AddTodoForm : trim(title)

alt title is not empty
    AddTodoForm -> TodoStore : addTodo(title)
    TodoStore -> TodoStore : validate with Zod
    TodoStore -> TodoStore : update state (Immer)
    TodoStore --> AddTodoForm : success
    AddTodoForm -> AddTodoForm : reset input state
else title is empty
    AddTodoForm -> AddTodoForm : do nothing
end

@enduml

@startuml Toggle/Update/Delete Todo Sequence
title Toggle/Update/Delete Todo Sequence

actor User
participant TodoItem
participant TodoStore

User -> TodoItem : Clicks Toggle/Edit Title/Delete

alt Toggle
    TodoItem -> TodoStore : toggleTodo(id)
else Update Title
    TodoItem -> TodoStore : updateTodo(id, title)
else Delete
    TodoItem -> TodoStore : deleteTodo(id)
end

TodoStore -> TodoStore : update state (Immer)
TodoStore --> TodoItem : State update triggers re-render

@enduml
