generator client {
  provider               = "prisma-client"
  output                 = "../generated/prisma"
  generatedFileExtension = "ts"
  importFileExtension    = "ts"
  moduleFormat           = "esm"
  runtime                = "cloudflare"
}

generator zod {
  provider         = "npx zod-prisma-types"
  output           = "../generated/zod"
  useMultipleFiles = true
  writeBarrelFiles = false
  prismaClientPath = "../../prisma/client"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model applications {
  id          String    @id @default(uuid(7))
  userId      String /// @zod.custom.omit([input])
  applied     DateTime /// @zod.custom.omit([input])
  company     String
  title       String
  url         String
  jobBoardUrl String?
  rejected    DateTime? /// @zod.custom.omit([input])
  dmUrl       String?
  dmSent      DateTime?

  @@unique([title, company])
  @@unique(url)
  @@index([id, userId])
}

model contacts {
  id                  String    @id @default(uuid(7))
  userId              String /// @zod.custom.omit([input])
  name                String
  phone               String?
  email               String?
  linkedIn            String?
  lastContact         DateTime
  expectedNextContact DateTime?

  @@index([id, userId])
}

model questionAnswers {
  id       String @id @default(uuid(7)) /// @zod.custom.omit([input])
  userId   String /// @zod.custom.omit([input])
  answer   String
  question String

  @@index([id, userId])
}
