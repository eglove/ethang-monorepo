<Fragment>
  <script>
    const formatter = Intl.NumberFormat(undefined);

    const calculate = () => {
      const mainElement = document.querySelector("main.prose");

      if (mainElement) {
        const textContent = mainElement.innerHTML.replace(/<[^>]*>/g, " ");
        const words = textContent
          .split(/\s+/)
          .filter((word) => word.length > 0);
        const wordCount = words.length;

        const readTimeMinutes = Math.ceil(wordCount / 225);

        const wordCountElement = document.querySelector(".word-count-display");
        if (wordCountElement) {
          wordCountElement.textContent = `${formatter.format(wordCount)} words Â· ${readTimeMinutes} min read`;
        }
      }
    };

    document.addEventListener("DOMContentLoaded", calculate);
    document.addEventListener("animationend", calculate);
  </script>

  <p class="text-sm text-gray-500 mb-4 word-count-display">Calculating...</p>
</Fragment>
